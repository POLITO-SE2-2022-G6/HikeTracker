// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}
generator frontend {
  provider = "prisma-client-js"
  output = "../../frontend/src/generated/prisma-client"
}

datasource db {
  provider = "sqlite"
  url      = "file:./database.db"
}

model Hut {
  id          Int     @id @default(autoincrement())
  Description String?
  Point       Point?  @relation("refHut")
  PointId     Int?
}

model ParkingLot {
  id          Int     @id @default(autoincrement())
  Description String?
  Point       Point?  @relation("refPL")
  PointId     Int?
}

model Point {
  id           Int         @id @default(autoincrement())
  Label        String?
  Latitude     Float?
  Longitude    Float?
  Elevation    Float?
  City         String?
  Region       String?
  Province     String?
  Hut          Hut?        @relation(fields: [HutId], references: [id], name: "refHut")
  HutId        Int?        @unique
  ParkingLot   ParkingLot? @relation(fields: [ParkingLotId], references: [id], name: "refPL")
  ParkingLotId Int?        @unique
  startOf      Hike[]      @relation("start")
  endOf        Hike[]      @relation("end")
  hikes        Hike[]      @relation("hikes")
}

model Hike {
  id               Int     @id @default(autoincrement())
  Title            String
  Length           Float
  Expected_time    Int
  Ascent           Float
  Difficulty       Int
  Description      String?
  Start_point      Point?  @relation(fields: [StartPointId], references: [id], name: "start")
  StartPointId     Int?
  End_point        Point?  @relation(fields: [EndPointId], references: [id], name: "end")
  EndPointId       Int?
  Reference_points Point[] @relation("hikes")
  GpsTrack         String?
  LocalGuide       User?   @relation(fields: [LocalGuideId], references: [id], name: "guide")
  LocalGuideId     Int?
}

model Performance {
  id       Int   @id @default(autoincrement())
  duration Int
  altitude Float
  user     User  @relation(fields: [UserId], references: [id])
  UserId   Int
}

model User {
  id          Int           @id @default(autoincrement())
  type        String
  email       String        @unique
  username    String
  phoneNumber String        @unique
  performance Performance[]
  hikesList   Hike[]        @relation("guide")
}
