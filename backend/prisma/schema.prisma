// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}
generator frontend {
  provider = "prisma-client-js"
  output = "../../frontend/src/generated/prisma-client"
}

datasource db {
  provider = "sqlite"
  url      = "file:./database.db"
}

model Hut {
  id          Int     @id @default(autoincrement())
  description String?
  point       Point?  @relation("refHut")
  pointid     Int?
}

model ParkingLot {
  id          Int     @id @default(autoincrement())
  description String?
  point       Point?  @relation("refPL")
  pointid     Int?
}

model Point {
  id           Int         @id @default(autoincrement())
  label        String?
  latitude     Float?
  longitude    Float?
  elevation    Float?
  city         String?
  region       String?
  province     String?
  hut          Hut?        @relation(fields: [hutid], references: [id], name: "refHut")
  hutid        Int?        @unique
  parkinglot   ParkingLot? @relation(fields: [parkinglotid], references: [id], name: "refPL")
  parkinglotid Int?        @unique
  startof      Hike[]      @relation("start")
  endof        Hike[]      @relation("end")
  hikes        Hike[]      @relation("hikes")
}

model Hike {
  id               Int     @id @default(autoincrement())
  title            String
  length           Float
  expected_time    Int
  ascent           Float
  difficulty       Int
  description      String?
  start_point      Point?  @relation(fields: [startpointid], references: [id], name: "start")
  startpointid     Int?
  end_point        Point?  @relation(fields: [endpointid], references: [id], name: "end")
  endpointid       Int?
  reference_points Point[] @relation("hikes")
  gpstrack         String?
  localguide       User?   @relation(fields: [localguideid], references: [id], name: "guide")
  localguideid     Int?
}

model Performance {
  id       Int   @id @default(autoincrement())
  duration Int
  altitude Float
  user     User  @relation(fields: [userid], references: [id])
  userid   Int
}

model User {
  id          Int           @id @default(autoincrement())
  type        String
  email       String        @unique
  username    String
  phoneNumber String        @unique
  performance Performance[]
  hikeslist   Hike[]        @relation("guide")
}
